#配置文件指南：https://jmcomic.readthedocs.io/zh-cn/latest/option_file_syntax/#2-option
log: true
client:
  # retry_times: 请求失败重试次数
  retry_times: 2

dir_rule:
  base_dir: ./download

# 下载配置
download:
  cache: true # 如果要下载的文件在磁盘上已存在，不用再下一遍了吧？默认为true
  threading:
    # image: 同时下载的图片数，默认是30张图
    # 数值大，下得快，配置要求高，对禁漫压力大
    # 数值小，下得慢，配置要求低，对禁漫压力小
    # PS: 禁漫网页一次最多请求50张图
    image: 10
    # photo: 同时下载的章节数，不配置默认是cpu的线程数。例如8核16线程的cpu → 16.
    photo: 2

plugins:
  after_init:
    - plugin: log_topic_filter # 日志topic过滤插件
      kwargs:
        whitelist: [ # 只保留api和html，这两个是Client发请求时会打的日志topic
          'album.before',
          'album.after',
          'plugin.img2pdf',
        ]

  after_album:
    - plugin: img2pdf
      kwargs:
        pdf_dir: ./pdf/ # pdf存放文件夹
        filename_rule: Aid # pdf命名规则，Aid代表使用album.id，避免过长文件名
